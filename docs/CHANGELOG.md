# 변경 로그 (Changelog)

## 2024년 12월

### v2.0.0 - 통합 워크플로우 릴리스 (2024-12-04)

#### 🎯 주요 변경사항

##### 1. 통합 "실시간 통역" 버튼
기존 3개 버튼을 하나로 통합했습니다:
- ~~자막 추출~~ 
- ~~실시간 통역~~
- ~~빠른 요약~~
- → **실시간 통역** (통합)

**동작 방식:**
```
[실시간 통역] 버튼 클릭
        ↓
   기존 데이터 확인 (98% 이상?)
        ↓
    ┌──────┴──────┐
    ↓             ↓
 98% 이상       98% 미만
    ↓             ↓
 바로 재생     자막 추출 시도
                  ↓
              ┌───┴───┐
              ↓       ↓
           자막 있음  자막 없음
              ↓       ↓
           번역 수행  실시간 통역
              ↓       모드 전환
           AI 재처리
              ↓
           요약 생성
              ↓
           저장 & 재생
```

##### 2. 기존 데이터 완성도 체크
- 동일한 영상 재방문 시 기존 데이터 확인
- **98% 이상** 완성 시 바로 재생 모드로 전환
- 완성도 계산: `마지막 자막 시간 / 영상 총 시간 × 100`

##### 3. 이중 저장 시스템
- **LocalStorage**: 즉시 저장 (오프라인 지원)
- **Supabase**: 백그라운드 저장 (영구 보관)

---

#### 🎨 UI/UX 개선

##### 1. YouTube 페이지 햄버거 메뉴
- 기존: 별도 `📋 기록` 버튼
- 변경: 우측 상단 `☰` 햄버거 아이콘
- 슬라이드 패널로 히스토리 목록 표시

##### 2. 히스토리 기능 강화
| 기능 | 설명 |
|------|------|
| 다시보기 | 저장된 자막과 함께 영상 재생 |
| 요약보기 | AI 요약 모달로 표시 |
| 삭제 | 히스토리 항목 삭제 |

##### 3. 실시간 통역 페이지 메뉴 이동
- 기존: 시작 버튼 옆 햄버거 아이콘
- 변경: 헤더 우측 상단으로 이동

---

#### 🔧 인프라 구축

##### 1. Railway 자막 서버 배포
- Python FastAPI 서버
- YouTube 자막 추출 전용
- Webshare 프록시 통합

##### 2. Webshare 프록시 연동
- 월 $3.50 주거용 프록시
- YouTube 서버 차단 우회
- `youtube-transcript-api` 공식 지원

##### 3. 자막 추출 다중 폴백
```
1단계: yt-dlp (프록시)
   ↓ 실패
2단계: youtube-transcript-api (프록시)
   ↓ 실패
3단계: youtube-transcript-api (프록시 없음)
   ↓ 실패
4단계: 실시간 통역 모드로 자동 전환
```

---

#### 📁 변경된 파일

| 파일 | 변경 내용 |
|------|----------|
| `frontend/app/service/translate/youtube/page.tsx` | 통합 버튼, 98% 체크, 햄버거 메뉴 |
| `frontend/app/service/translate/youtube/live/page.tsx` | 자막 처리 워크플로우, 저장 데이터 로드 |
| `frontend/app/service/translate/mic/page.tsx` | 햄버거 메뉴 위치 이동 |
| `frontend/app/api/youtube/transcript/route.ts` | Railway 서버 연동 |
| `subtitle-server/main.py` | Webshare 프록시, 다중 폴백 |
| `subtitle-server/requirements.txt` | yt-dlp 추가 |

---

#### 🐛 버그 수정

1. **자막 추출 실패 문제**
   - 원인: YouTube 서버 차단
   - 해결: Webshare 프록시 + Railway 서버

2. **404 오류 (외부 API)**
   - 원인: `SUBTITLE_API_URL` 후행 슬래시
   - 해결: 슬래시 제거

3. **Next.js 보안 취약점**
   - 해결: `next@^16.0.7`로 업데이트

---

### v1.x - 이전 버전

#### v1.3.0 - 자막 업로드 기능
- SRT/VTT/TXT 파일 업로드 지원
- 업로드된 자막으로 영상 싱크 재생

#### v1.2.0 - 빠른 요약 모드
- 영상 끝까지 자막 추출 후 AI 요약
- 전체 영상 내용 한눈에 파악

#### v1.1.0 - 실시간 통역 모드
- 마이크 모드: Web Speech API
- 시스템 오디오 모드: Deepgram API
- 실시간 번역 및 자막 표시

#### v1.0.0 - 초기 릴리스
- YouTube 자막 추출
- 다국어 번역
- Supabase 인증

---

## 향후 계획

### 단기 (1-2주)
- [ ] 실시간 통역 종료 시 자동 AI 재처리/요약
- [ ] 히스토리 검색 기능
- [ ] 오프라인 모드 강화

### 중기 (1-2개월)
- [ ] 다중 화자 분리 (Speaker Diarization)
- [ ] 회의록 자동 생성
- [ ] 공유 기능

### 장기
- [ ] 모바일 앱
- [ ] 브라우저 확장 프로그램
- [ ] 실시간 자막 방송

